notifications:
  email: false

matrix:
  include:
    - sudo: required
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux1_x86_64
           PLAT=manylinux1_x86_64
    - sudo: required
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux2010_x86_64
           PLAT=manylinux2010_x86_64

install:
  - docker pull $DOCKER_IMAGE

script:
  - docker run --rm -e PLAT=$PLAT -v `pwd`:/io $DOCKER_IMAGE $PRE_CMD /io/travis/build-wheels.sh
  - ls wheelhouse/

deploy:
  provider: s3
  access_key_id: AKIAJCVE5RZBSCMPSFSQ
  secret_access_key:
    secure: "IwFrgncz9SmeIlB93ZGW58ByD53Fk7AjZx6yzJjunm1qvoATFJRR8lGM7VfTfLu8f4JHld0XnJz5F5GJh1F9MZLPM8KoAC05pXt9iTyQh9da0bQR8jI6mh3OR9DTRaLg9/eWEyE88h0MDAwDHw/x3AP1+38rqKwPtg7FJdxKKhMyC3+x+8Y3mp6Dsmb/h1oajF5fQ7SylaIwgUd0AjROpLxe0+xfpUgDIJtR8IIaxqfaY9bow6zY+jsmfN6XCe+LUgZJ7miAyANffH27N2unX55Sd8V210oySwCkRB2cMowivEE4BUsW1cyN3cdSNQUL50bK5PtD/u62JbkhOaq8ay+l8edLu+wWAf2/ASMnuQMAshf709UQDe7qU9o7q/kASrJM5heIZaua1quEC1L8QdUFVvdzmpDb9+cBAceUzszU7f6gI+YfVhVED9if/irfSTN2mlNJuAZsf4FKn0G/u5XCOfxvT5/4P1vA+M7mZ/B1jibbEYS2YCwVEsLb4EpHjO0KbXV+DkrTGml7vYU904TE1Y5kS8cWXv/HUD+D0Oa/f8HxrYhNkA0TF/+KmxSAfNGq/PbdmHHTxvWho7jUQ7hv7S0lIC1a+Zi6U1AC65L1tchcRnGT680wVhtai4xLvksMCM1c1k+9Acq459LHqbA43d/z7dH5cqsMp8ML8Ac="
  bucket: parsely-artifacts
  skip_cleanup: true
  local_dir: wheelhouse
  upload_dir: lib/wheels

after_deploy:
  - 'curl -XPOST -H "Accept: application/json" "https://rundeck.cogtree.com/api/16/job/880b3e78-708f-44d8-b065-4e3460cf54b9/run?authtoken=$RUNDECK_APIKEY"'

env:
  global:
    # RUNDECK_APIKEY
    - secure: "zg6iqeqxvwwU7WB/u5SExI9SpX3pmNo9l8iHtpZezRqv6CC27Ha7zb6onapteMx60qjcwJ8VLrY6h5OPSEmA2O9z5Rx5Dfx80vPF6vZZt9Oq++ZZ4yPNZVUqS0UPtgva6hvSr+iEWYHBeh8edAmAUgPfhe7FHoNNFHCjF3pmt0R3uEQTlVfKxsB7CHmTpu3pqk6/jTfN9gJ9Kc/XX2wNqK2elIgO7Be7Jwv1O5klMdCF6/UI4Iz/FcU8k7XmRyiUpxFfQnukq5Fv30H9RZhGqgHFXsLuauHZ0mA/Lxq53iW3UfabTdp8tJpNB5JeudZ1RykPAMVMtpIYtgPN/Gj/9pe9wHZrw1AzGO7Rfu6FvX2cNZjscNdRTiDAkUtrElIH+O12A2os2t3eDuO1MLBQM0fdBdW+yu2vUQ2+eX11MWqCwThDhcGFhjA5nw2IsU5ayV2iHYcSFWMUNl+aOMRpCbothnK93K7RmNjmkARO9pz/ZsBL9s04KelfA+C00335KGYvkDK9war3KDbh1BRO8e9avWu+9B+36Bb/TEAkk1XuOXZtsIxRa1fs3d51TlIaNeBLWMvIfE8xb2R+ywRqcRXrD+krfuE/D5w6D4GTIpS2iTfUnoJSj6cXENY7grptuniigQQp4F9bE+z/kZh6F46qyfeCZsqQ+VIO2ss/zPw="
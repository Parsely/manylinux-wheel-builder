notifications:
  email: false

matrix:
  include:
    - sudo: required
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux1_x86_64
           PLAT=manylinux1_x86_64
    - sudo: required
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux2010_x86_64
           PLAT=manylinux2010_x86_64

install:
  - docker pull $DOCKER_IMAGE

script:
  - docker run --rm -e PLAT=$PLAT -v `pwd`:/io $DOCKER_IMAGE $PRE_CMD /io/travis/build-wheels.sh
  - ls wheelhouse/

deploy:
  provider: s3
  access_key_id: AKIAJCVE5RZBSCMPSFSQ
  secret_access_key:
    secure: "IwFrgncz9SmeIlB93ZGW58ByD53Fk7AjZx6yzJjunm1qvoATFJRR8lGM7VfTfLu8f4JHld0XnJz5F5GJh1F9MZLPM8KoAC05pXt9iTyQh9da0bQR8jI6mh3OR9DTRaLg9/eWEyE88h0MDAwDHw/x3AP1+38rqKwPtg7FJdxKKhMyC3+x+8Y3mp6Dsmb/h1oajF5fQ7SylaIwgUd0AjROpLxe0+xfpUgDIJtR8IIaxqfaY9bow6zY+jsmfN6XCe+LUgZJ7miAyANffH27N2unX55Sd8V210oySwCkRB2cMowivEE4BUsW1cyN3cdSNQUL50bK5PtD/u62JbkhOaq8ay+l8edLu+wWAf2/ASMnuQMAshf709UQDe7qU9o7q/kASrJM5heIZaua1quEC1L8QdUFVvdzmpDb9+cBAceUzszU7f6gI+YfVhVED9if/irfSTN2mlNJuAZsf4FKn0G/u5XCOfxvT5/4P1vA+M7mZ/B1jibbEYS2YCwVEsLb4EpHjO0KbXV+DkrTGml7vYU904TE1Y5kS8cWXv/HUD+D0Oa/f8HxrYhNkA0TF/+KmxSAfNGq/PbdmHHTxvWho7jUQ7hv7S0lIC1a+Zi6U1AC65L1tchcRnGT680wVhtai4xLvksMCM1c1k+9Acq459LHqbA43d/z7dH5cqsMp8ML8Ac="
  bucket: parsely-artifacts
  skip_cleanup: true
  local_dir: wheelhouse
  upload_dir: lib/wheels

after_deploy:
  - 'curl -XPOST -H "Accept: application/json" "https://rundeck.cogtree.com/api/16/job/880b3e78-708f-44d8-b065-4e3460cf54b9/run?authtoken=$RUNDECK_APIKEY"'

env:
  global:
    # RUNDECK_APIKEY
    - secure: "zgKg1Dd0K+Rn1SZbE+QBnnuR6ODrZx/zx7gSkiYC6mcCMUOVZfbmnPlUwaRN0sKVZYbwyDrLKdARc6hHYFg5x7LBmJIGpo/gXUa1drEAdLa4XH8ngk/5KnpcrGAthhbbUDmbOsLwgMxjetiE8S33YHqDFadbKlZMAjXFBCHL2JnWDR8I2QT99r/Lqy/jpzmrfW3e/eWgo23w1M6CyFXg1cgl8MzGO5Dvdh7YL5yUc1cggMmsWMnrby6hzGHijeYXeexpZ1+r/gT0zBQTd6GpUtsVnzv/wDZmg8QONH5YpRsr8UKUOlDEaWoUM+osbyQp+74eDXTFrg0UaRLxDdKevTEC3GZif/6pcVMdE1wjdXDiVgMGkCIC6W0Cp0jKBUXaeXsQLm2fgbz92qQepMHdV0QM4Je1lj+B9yG6Xta0tVx545YLzkRMT/ryXRo3xLCFGjZ+LpARY11t0FRrdZtq+hvTYxK6DAW9+nkz0YBJdGG29XFbSP0lldEPrwOqrHCwTA2BYBFQRoIhY3pSaGU8QL8vpZbuY2b8PpDVXIz3zpVSimrwXnS59AzNQUbWbGubhkAHQi3hK4JwiDWeKdh/jTIHZ7h2NF/YPOCEP68Srzp/SrrmUVqb1qhl4h2eeVHRGR4YWqVA/L+7LOYBAbZLvUrR5Jav1z66hTx5lo61IbQ="